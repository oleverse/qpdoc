{% extends "base.html" %}
{% block title %}
    <title>{{ title }}</title>
{% endblock %}
{% block style_file %}
    <link rel="stylesheet" href="{{ url_for('static', path='/css/profile.css') }}">
{% endblock %}
{% block content %}
            <h2 id="user">User profile</h2>
            <div class="container">
                <div class="leftbox">
                    <nav>
                        <a href="#" class="chat">
                            <i class="fa-solid fa-comment-dots"></i>
                        </a>
                    </nav>
                </div>

                <div class="centerbox">
                    <div class="profile">
                        <h2>Username</h2>
                        <h3>email</h3>
                        <p id="rename">Змінити ім'я користувача</p>
                        <input type="text"
                        id="username"
                        class="input-field"
                        placeholder="New username" required>
                        <button type="submit"
                        class="name-btn">Rename</button>
                        <p>
                            <button type="submit"
                            class="logout-btn">Logout</button>
                        </p>
                    </div>
                </div>

                <div class="rightbox">
                    <input type="file" id="file-input" multiple>
                    <label for="file-input">
                        <i class="fa-solid fa-arrow-up-from-bracket"></i>
                        &nbsp; Choose PDF
                    </label>
                    <div id="num-of-files">No Files Coosen</div>
                    <ul id="files-list"></ul>
                </div>
            </div>

            <!-- SCRIPT FOR FILE BAR -->

            <script>
                let fileInput = document.getElementById("file-input");
                let fileList = document.getElementById("files-list");
                let numOfFiles = document.getElementById("num-of-files");

                fileInput.addEventListener("change", () => {
                    fileList.innerHTML = "";
                    numOfFiles.textContent = `${fileInput.files.length}
                    Files Selected`;

                    for (i of fileInput.files) {
                        let reader = new FileReader();
                        let listItem = document.createElement("li");
                        let fileName = i.name;
                        fileSize = (i.size / 1024).toFixed(1);
                        listItem.innerHTML = `<p>${fileName}</p><p>${fileSize}KB</p>`;

                        if (fileSize >= 1024) {
                            fileSize = (fileSize / 1024).toFixed(1);
                            listItem.innerHTML = `<p>${fileName}</p><p>${fileSize}MB</p>`;
                        }
                        fileList.appendChild(listItem);
                    }
                });
            </script>
{% endblock %}